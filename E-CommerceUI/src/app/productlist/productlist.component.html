<app-navbar></app-navbar>

<div class="container mt-4">
  <!-- Search and Filter Section -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <form class="form-inline" (ngSubmit)="search()">
      <div class="input-group">
        <input type="text" class="form-control form-control-sm" [(ngModel)]="form.searchParams.name"
          placeholder="Search products..." name="name" aria-label="Search by Name">
        <div class="input-group-append">
          <button type="submit" class="btn btn-outline-primary btn-sm">
            <i class="bi bi-search"></i> <!-- Search icon -->
          </button>
        </div>
      </div>
    </form>

    <select id="categorySelect" class="form-control form-control-sm ml-2" [(ngModel)]="form.searchParams.category"
      aria-label="Select Category">
      <option value="">All Categories</option>
      <option *ngFor="let category of form.categories" [value]="category.value">{{ category.value }}</option>
    </select>
  </div>

  <!-- Product Grid -->
  <div class="product-grid">
    <div *ngFor="let m of form.list" class="product-card">
      <div *ngIf="m.imageId">
        <img src="http://localhost:8080/Product/profile/{{m.id}}" height="55px" width="80px">
      </div>
      <div *ngIf="!m.imageId">
        <img src="../../assets/files/default.jpg" height="55px" width="80px">
      </div>
      <div class="product-info">
        <h3 class="product-name">{{ m.name || 'N/A' }}</h3>
        <p class="product-description">{{ m.description || 'N/A' }}</p>
        <p class="product-price">{{ m.price | currency: 'INR' }}</p>
        <p class="product-rating">
          <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
            <span [ngClass]="{'star-filled': m.rating >= star, 'star-empty': m.rating < star}">&#9733;</span>
          </ng-container>
        </p>
        <p class="product-category">Category: {{ m.category || 'N/A' }}</p>
        <div class="button-group">
          <button class="btn btn-info btn-sm" (click)="viewDetails(m.id)">
            <i class="bi bi-eye"></i> View Details
          </button>
          <button class="btn btn-primary btn-sm" (click)="addToCart(m.id)">
            <i class="bi bi-cart-plus"></i> Add to Cart
          </button>

        </div>
      </div>
    </div>

    <!-- No Products Available Message -->
    <div *ngIf="form.list.length === 0" class="no-products">
      No products available
    </div>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button class="btn btn-secondary btn-sm" (click)="previousPage()" [disabled]="form.pageNo === 0">
      <i class="bi bi-chevron-left"></i> Previous
    </button>
    <span>Page {{ form.pageNo + 1 }}</span>
    <button class="btn btn-secondary btn-sm" (click)="nextPage()" [disabled]="form.nextList == null">
      Next <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>

<app-footer></app-footer>