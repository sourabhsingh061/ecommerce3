{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth-interceptor.service\";\nimport * as i2 from \"../services/http-service.service\";\nimport * as i3 from \"@angular/router\";\nfunction LoginComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.message);\n  }\n}\nfunction LoginComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.inputerror[\"loginId\"]);\n  }\n}\nfunction LoginComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.inputerror[\"password\"]);\n  }\n}\nexport class LoginComponent {\n  constructor(authService, httpService, router, route) {\n    this.authService = authService;\n    this.httpService = httpService;\n    this.router = router;\n    this.route = route;\n    this.endpoint = \"http://localhost:8080/Auth\";\n    this.form = {\n      error: false,\n      loginId: '',\n      password: ''\n    };\n    this.inputerror = {}; // Define inputerror with appropriate typing\n    this.message = '';\n  }\n  ngOnInit() {}\n  onLogin() {\n    var _self = this;\n    this.httpService.post(this.endpoint + \"/login\", this.form, function (res) {\n      _self.inputerror = {}; // Reset inputerror before setting new errors\n      if (res.result && res.result.inputerror) {\n        _self.inputerror = res.result.inputerror; // Assign errors from the backend to inputerror\n      }\n\n      if (res.success && res.result != null) {\n        localStorage.setItem('name', res.result.name);\n        localStorage.setItem('token', 'Bearer ' + res.result.token);\n        localStorage.setItem('id', res.result.id);\n        // Handle successful loginng s \n        _self.router.navigate(['/productlist']); // Example: navigate to home page\n      } else {\n        _self.message = 'Login failed. Please check your credentials.'; // Handle login failure\n      }\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthInterceptorService), i0.ɵɵdirectiveInject(i2.HttpServiceService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 20,\n    vars: 5,\n    consts: [[1, \"login-container\"], [1, \"login-box\"], [1, \"login-title\"], [3, \"ngSubmit\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"loginId\"], [\"type\", \"text\", \"name\", \"loginId\", \"id\", \"loginId\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"id\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\"], [1, \"alert\", \"alert-danger\"], [1, \"text-danger\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h2\", 2);\n        i0.ɵɵtext(4, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_5_listener() {\n          return ctx.onLogin();\n        });\n        i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 2, 1, \"div\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6);\n        i0.ɵɵtext(9, \"LoginId\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.form.loginId = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, LoginComponent_span_11_Template, 2, 1, \"span\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\", 9);\n        i0.ɵɵtext(14, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.form.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, LoginComponent_span_16_Template, 2, 1, \"span\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵtext(18, \"Login\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(19, \"app-footer\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.message);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.loginId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.inputerror[\"loginId\"]);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.password);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.inputerror[\"password\"]);\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\", \".login-container[_ngcontent-%COMP%] {\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        height: 100vh; \\n\\n        background-color: #f4f7f9; \\n\\n    }\\n\\n    .login-box[_ngcontent-%COMP%] {\\n        width: 400px; \\n\\n        padding: 30px;\\n        border: 1px solid #ddd; \\n\\n        border-radius: 8px; \\n\\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); \\n\\n        background-color: #fff; \\n\\n    }\\n\\n    .login-title[_ngcontent-%COMP%] {\\n        margin-bottom: 20px;\\n        text-align: center;\\n        color: #333; \\n\\n        font-weight: bold;\\n    }\\n\\n    .form-group[_ngcontent-%COMP%] {\\n        margin-bottom: 20px; \\n\\n    }\\n\\n    .form-control[_ngcontent-%COMP%] {\\n        border: 1px solid #ccc; \\n\\n        border-radius: 4px; \\n\\n        padding: 10px;\\n        font-size: 16px;\\n        transition: border-color 0.3s ease; \\n\\n    }\\n\\n    .form-control[_ngcontent-%COMP%]:focus {\\n        border-color: #007bff; \\n\\n        box-shadow: 0 0 8px rgba(0, 123, 255, 0.2); \\n\\n    }\\n\\n    .btn-primary[_ngcontent-%COMP%] {\\n        background-color: #007bff; \\n\\n        border: none;\\n        padding: 10px;\\n        font-size: 16px;\\n        font-weight: bold;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        transition: background-color 0.3s ease; \\n\\n    }\\n\\n    .btn-primary[_ngcontent-%COMP%]:hover {\\n        background-color: #0056b3; \\n\\n    }\\n\\n    .text-danger[_ngcontent-%COMP%] {\\n        font-size: 14px; \\n\\n        color: #d9534f; \\n\\n        margin-top: 5px;\\n        display: block; \\n\\n    }\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","message","ctx_r1","inputerror","ctx_r2","LoginComponent","constructor","authService","httpService","router","route","endpoint","form","error","loginId","password","ngOnInit","onLogin","_self","post","res","result","success","localStorage","setItem","name","token","id","navigate","_","ɵɵdirectiveInject","i1","AuthInterceptorService","i2","HttpServiceService","i3","Router","ActivatedRoute","_2","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelement","ɵɵlistener","LoginComponent_Template_form_ngSubmit_5_listener","ɵɵtemplate","LoginComponent_div_6_Template","LoginComponent_Template_input_ngModelChange_10_listener","$event","LoginComponent_span_11_Template","LoginComponent_Template_input_ngModelChange_15_listener","LoginComponent_span_16_Template","ɵɵproperty"],"sources":["E:\\FrontEnd\\E-CommerceUI\\src\\app\\login\\login.component.ts","E:\\FrontEnd\\E-CommerceUI\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AuthInterceptorService } from '../services/auth-interceptor.service';\nimport { HttpServiceService } from '../services/http-service.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  endpoint = \"http://localhost:8080/Auth\";\n\n  form = {\n    error: false,\n    loginId: '',\n    password: ''\n  };\n\n  inputerror: { [key: string]: string } = {}; // Define inputerror with appropriate typing\n  message = '';\n\n  constructor(private authService: AuthInterceptorService, private httpService: HttpServiceService, private router: Router, private route: ActivatedRoute) {}\n\n  ngOnInit(): void {}\n\n  onLogin() {\n    var _self = this;\n    this.httpService.post(this.endpoint + \"/login\", this.form, function (res: any) {\n      _self.inputerror = {}; // Reset inputerror before setting new errors\n      if (res.result && res.result.inputerror) {\n        _self.inputerror = res.result.inputerror; // Assign errors from the backend to inputerror\n      }\n      if (res.success && res.result != null) {\n        localStorage.setItem('name',res.result.name)\n        localStorage.setItem('token','Bearer '+res.result.token)\n        localStorage.setItem('id', res.result.id)\n        // Handle successful loginng s \n        _self.router.navigate(['/productlist']); // Example: navigate to home page\n      } else {\n        _self.message = 'Login failed. Please check your credentials.'; // Handle login failure\n      }\n    });\n  }\n}\n","<!-- Updated HTML for the Login Form -->\n<app-navbar></app-navbar>\n<div class=\"login-container\">\n    <div class=\"login-box\">\n        <h2 class=\"login-title\">Login</h2>\n        <form (ngSubmit)=\"onLogin()\">\n            <!-- Display general error message if login fails -->\n            <div *ngIf=\"message\" class=\"alert alert-danger\">{{ message }}</div>\n\n            <div class=\"form-group\">\n                <label for=\"loginId\">LoginId</label>\n                <input type=\"text\" name=\"loginId\" id=\"loginId\" [(ngModel)]=\"form.loginId\" required class=\"form-control\">\n                <!-- Display loginId error -->\n                <span *ngIf=\"inputerror['loginId']\" class=\"text-danger\">{{ inputerror['loginId'] }}</span>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"password\">Password</label>\n                <input type=\"password\" name=\"password\" id=\"password\" [(ngModel)]=\"form.password\" required class=\"form-control\">\n                <!-- Display password error -->\n                <span *ngIf=\"inputerror['password']\" class=\"text-danger\">{{ inputerror['password'] }}</span>\n            </div>\n\n            <button type=\"submit\" class=\"btn btn-primary btn-block\">Login</button>\n        </form>\n    </div>\n</div>\n\n<!-- CSS Styles -->\n<style>\n    .login-container {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh; /* Full height to center vertically */\n        background-color: #f4f7f9; /* Light background for the whole page */\n    }\n\n    .login-box {\n        width: 400px; /* Fixed width for consistency */\n        padding: 30px;\n        border: 1px solid #ddd; /* Light border */\n        border-radius: 8px; /* Rounded corners */\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */\n        background-color: #fff; /* White background for contrast */\n    }\n\n    .login-title {\n        margin-bottom: 20px;\n        text-align: center;\n        color: #333; /* Dark color for better readability */\n        font-weight: bold;\n    }\n\n    .form-group {\n        margin-bottom: 20px; /* Space between fields */\n    }\n\n    .form-control {\n        border: 1px solid #ccc; /* Border around input fields */\n        border-radius: 4px; /* Slightly rounded corners */\n        padding: 10px;\n        font-size: 16px;\n        transition: border-color 0.3s ease; /* Smooth border color change */\n    }\n\n    .form-control:focus {\n        border-color: #007bff; /* Highlighted border on focus */\n        box-shadow: 0 0 8px rgba(0, 123, 255, 0.2); /* Subtle glow effect */\n    }\n\n    .btn-primary {\n        background-color: #007bff; /* Primary button color */\n        border: none;\n        padding: 10px;\n        font-size: 16px;\n        font-weight: bold;\n        cursor: pointer;\n        border-radius: 4px;\n        transition: background-color 0.3s ease; /* Smooth transition */\n    }\n\n    .btn-primary:hover {\n        background-color: #0056b3; /* Darker shade on hover */\n    }\n\n    .text-danger {\n        font-size: 14px; /* Slightly smaller font for error messages */\n        color: #d9534f; /* Red color for error messages */\n        margin-top: 5px;\n        display: block; /* Display error messages on a new line */\n    }\n</style>\n<app-footer></app-footer>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}